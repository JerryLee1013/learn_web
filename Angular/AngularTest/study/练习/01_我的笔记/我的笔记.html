<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>

<style>
    textarea{
        resize: none;
    }
</style>
<body ng-app="myApp">
<div ng-controller="MyController">
    <h1>我的笔记</h1>
    <textarea name="" id="" cols="30" rows="10" ng-model="msg"></textarea><br>
    <button ng-click="save()">保存</button>
    <button ng-click="read()">读取</button>
    <button ng-click="delete()">删除</button>
    <p>剩余字数：{{getCount()}}</p>
</div>
<script type='text/javascript' src="../../js/angular-1.5.5/angular.js"></script>
<script type="text/javascript">
    angular.module("myApp",[])
            .controller("MyController",["$scope",function ($scope) {
                //初始化msg
                $scope.msg = ""
                //初始化oldMsg
                $scope.oldMsg = ""
                $scope.getCount = function () {
                    //判断用户输入内容的长度
                    if($scope.msg.length>100){
                        $scope.msg = $scope.msg.slice(0,100)
                        
                    }
                    return 100 - $scope.msg.length
                }
                /*$scope.save = function () {
                    if($scope.msg.length>0){
                        $scope.oldMsg = $scope.msg
                        $scope.msg = ""
                        alert("数据已保存")
                    }
                    
                }
                $scope.read = function () {
                    $scope.msg = $scope.oldMsg
                }
                $scope.delete = function () {
                    $scope.msg = ""
                    $scope.oldMsg = ""
                }*/
                
                /*定义保存数据的方法*/
                $scope.save = function(){
                    if($scope.msg){
                        alert("note is saved")
                        localStorage.setItem("note_key",JSON.stringify($scope.msg))
                        $scope.msg = ""
                    }
                }
                /*定义读取数据的方法*/
                $scope.read = function(){
                    $scope.msg = JSON.parse(localStorage.getItem("note_key")||"[]")
                }
                /*定义删除数据的方法*/
                $scope.delete = function(){
                    localStorage.removeItem("note_key")
                    $scope.msg = ""
                }
            }])
    
    /*
    *   H5本地存储奇数
    *       1.sessionStorage（会话存储）
    *           -   生命周期：浏览器打开到关闭的过程
    *           -   大小：5M
    *           -   保存位置：浏览器端
    *           -   setItem("key",value)
    *           -   getItem("key")
    *           -   removeItem("key")
    *
    *       2.localStorage（永久存储）
    *           -   生命周期：除非认为删除
    *           -   大小：5M，甚至更大
    *           -   保存位置：浏览器端
    *           -   setItem("key",value)
    *           -   getItem("key")
    *           -   removeItem("key")
    *
    *       3.cookie
    *           用于浏览器端和服务器端进行通信；
    *           特点：
    *               -   大小：4kb
    *               -   每次发送请求都携带，导致占用带宽
    *               -   保存在浏览器端
    *               -   cookie容易被截获，不安全
    *               -   生命周期：
    *                   -   会话cookie：浏览器打开到关闭的过程
    *                   -   人为设置cookie：人为设置的时间
    * */
</script>
</body>

</html>