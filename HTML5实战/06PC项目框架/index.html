<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="stylesheet" href="css/index.css" />
        <link rel="stylesheet" href="font/iconfont.css" />
        <!-- 设置分辨率 -->
    </head>
    <body>
        <!-- 整体包裹区 -->
        <section id="wrap">
            <!-- 头部，流体布局 -->
            <header id="head">
                <!-- 固定布局 -->
                <div class="headMain">
                    <!-- logo -->
                    <h1 class="logo">
                        <a href="javascript:;">
                            <img
                                src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1598082995795&di=794266c31979e1000ff4f38d820befad&imgtype=0&src=http%3A%2F%2Fimg.ewebweb.com%2Fuploads%2F20190625%2F16%2F1561450847-VOdWtNnhRB.jpg"
                                alt=""
                            />
                        </a>
                    </h1>
                    <!-- 导航 -->
                    <nav class="nav">
                        <ul class="list">
                            <li>
                                <a href="javascript:;">
                                    <div class="up">
                                        <img src="img/homeBlack.jpg" alt="" />
                                    </div>
                                    <div class="down">
                                        <img src="img/homeWhite.jpg" alt="" />
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <div class="up">
                                        Course
                                    </div>
                                    <div class="down">
                                        Course
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <div class="up">
                                        Works
                                    </div>
                                    <div class="down">
                                        Works
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <div class="up">
                                        About
                                    </div>
                                    <div class="down">
                                        About
                                    </div>
                                </a>
                            </li>
                            <li>
                                <a href="javascript:;">
                                    <div class="up">
                                        Team
                                    </div>
                                    <div class="down">
                                        Team
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <!-- 下指向箭头 -->
                    <div class="arrow">
                        <div class="iconarrow"></div>
                    </div>
                </div>
            </header>
            <!-- 内容区 -->
            <section id="content">
                <ul class="list">
                    <li class="home">
                        <section>
                            <ul class="home1 commomTitle">
                                <li class="active">
                                    <div class="item">
                                        one layer
                                    </div>
                                </li>
                                <li class="">
                                    <div class="item">
                                        two layer
                                    </div>
                                </li>
                                <li class="">
                                    <div class="item">
                                        three layer
                                    </div>
                                </li>
                                <li class="">
                                    <div class="item">
                                        four layer
                                    </div>
                                </li>
                            </ul>
                            <ul class="home2">
                                <li class="active"></li>
                                <li></li>
                                <li></li>
                                <li></li>
                            </ul>
                        </section>
                    </li>
                    <li class="course">
                        <section>
                            <header class="course1 commomTitle">
                                <span>EINBLICK</span><br />
                                <span>DEVELOPERS</span><br />
                                <span>BEST</span><br />
                            </header>
                            <div class="course2 commonText">
                                <p>
                                    Nothing succeeds lacks confidence. When you
                                    are truly and justifiably confident, it
                                    radiates from you like sunlight, and
                                    attracts success to you like a magnet. It's
                                    important to believe in yourself. Believe
                                    that you can do it under any circumstances,
                                    because if you believe you can, then you
                                    really will. <br />
                                    The belief keeps you searching for answers,
                                    which means that pretty soon you will get
                                    them. Confidence is more than an attitude.
                                    It comes from knowing exactly where you are
                                    going and exactly how you are going to get
                                    there. It comes from acting with integrity
                                    and confidence.
                                </p>
                            </div>
                            <div class="course3">
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                                <div class="item">
                                    <div class="backface"></div>
                                    <div class="face">我有一只小毛驴</div>
                                </div>
                            </div>
                        </section>
                    </li>
                    <li class="works">
                        <section>
                            <header class="works1 commomTitle">
                                <span>EINBLICK</span><br />
                                <span>DEVELOPERS</span><br />
                                <span>BEST</span><br />
                            </header>
                            <div class="works2">
                                <div class="item">
                                    <img src="img/01.jpg" alt="" />
                                    <div class="mask">
                                        <span>我有一只小毛驴</span>
                                        <div class="icon">
                                            <div class="iconwrap">
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="item">
                                    <img src="img/02.jpg" alt="" />
                                    <div class="mask">
                                        <span>我从来都不骑</span>
                                        <div class="icon">
                                            <div class="iconwrap">
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="item">
                                    <img src="img/03.jpg" alt="" />
                                    <div class="mask">
                                        <span>有一天我骑着它去赶集</span>
                                        <div class="icon">
                                            <div class="iconwrap">
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="item">
                                    <img src="img/06.jpg" alt="" />
                                    <div class="mask">
                                        <span>我右手拿着小皮鞭</span>
                                        <div class="icon">
                                            <div class="iconwrap">
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                                <span
                                                    class="iconfont icon-zoomout"
                                                ></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="works3"></div>
                        </section>
                    </li>
                    <li class="about">
                        <section>about</section>
                    </li>
                    <li class="team">
                        <section>team</section>
                    </li>
                </ul>
            </section>
        </section>
    </body>
    <script>
        window.onload = function () {
            //获取dom元素
            var arrowEle = document.querySelector("#head .headMain .arrow");
            var liNodes = document.querySelectorAll(
                "#head .headMain .nav .list > li"
            );
            var upNodes = document.querySelectorAll(
                "#head .headMain .nav .list > li .up"
            );
            var firstliNode = liNodes[0];
            var firstupNode = firstliNode.querySelector(".up");
            var head = document.querySelector("#head");
            var content = document.querySelector("#content");
            var cLiNodes = document.querySelectorAll("#content .list > li");
            var ulNode = document.querySelector("#content>.list");
            var now = 0; /* 同步当前索引 */
            var timer = 0;
            var timer3D = 0;
            var oldIndex = 0;
            var autoIndex = 0;
            var home2LiNodes = document.querySelectorAll(
                "#content > .list .home .home2 li"
            );
            var home1LiNodes = document.querySelectorAll(
                "#content > .list .home .home1 li"
            );
            var home1 = document.querySelector("#content > .list .home .home1");
            /* 内容区交互 */
            /* 第一屏3D效果 */
            home3D();
            function home3D() {
                /* home1鼠标进入、离开事件 */
                home1.onmouseenter = function () {
                    clearInterval(timer3D);
                };
                home1.onmouseleave = function () {
                    autoLunbo();
                };
                /* 自动轮播方法调用 */
                autoLunbo();
                /* 自动轮播方法 */
                function autoLunbo() {
                    clearInterval(timer3D);
                    timer3D = setInterval(function () {
                        autoIndex++;
                        if (autoIndex == home1LiNodes.length) {
                            autoIndex = 0;
                        }
                        autolunboFun(autoIndex);
                        oldIndex = autoIndex;
                    }, 2000);
                }
                /* 点击轮播事件 */
                for (let i = 0; i < home2LiNodes.length; i++) {
                    home2LiNodes[i].onclick = function () {
                        clearInterval(timer3D);
                        lunboClick(i);
                        autoIndex = i;
                        autoLunbo();
                    };
                }
                /* 自动轮播调用函数 */
                function autolunboFun(i) {
                    removeClass(home2LiNodes, "active");
                    home2LiNodes[i].classList.add("active");
                    if (i != oldIndex) {
                        home1LiNodes[0].classList.remove("active");

                        removeClass(home1LiNodes, "rightShow");
                        removeClass(home1LiNodes, "rightHide");
                        removeClass(home1LiNodes, "leftShow");
                        removeClass(home1LiNodes, "leftHide");

                        /* 从左往右播 */

                        home1LiNodes[oldIndex].classList.add("leftHide");
                        home1LiNodes[i].classList.add("rightShow");
                        oldIndex = i;
                    }
                }
                /* 点击轮播调用函数 */
                function lunboClick(i) {
                    removeClass(home2LiNodes, "active");
                    home2LiNodes[i].classList.add("active");
                    if (i != oldIndex) {
                        home1LiNodes[0].classList.remove("active");

                        removeClass(home1LiNodes, "rightShow");
                        removeClass(home1LiNodes, "rightHide");
                        removeClass(home1LiNodes, "leftShow");
                        removeClass(home1LiNodes, "leftHide");

                        /* 从左往右点 */
                        if (i > oldIndex) {
                            home1LiNodes[oldIndex].classList.add("leftHide");
                            home1LiNodes[i].classList.add("rightShow");
                            oldIndex = i;
                        }

                        /* 从右往左点 */
                        if (i < oldIndex) {
                            home1LiNodes[oldIndex].classList.add("rightHide");
                            home1LiNodes[i].classList.add("leftShow");
                            oldIndex = i;
                        }
                    }
                }
                /* 批量清空类方法 */
                function removeClass(nodes, className) {
                    for (let j = 0; j < nodes.length; j++) {
                        nodes[j].classList.remove(className);
                    }
                }
            }

            //内容区滚轮事件
            if (content.addEventListener) {
                content.addEventListener("DOMMouseScroll", function (ev) {
                    ev = ev || event;
                    clearTimeout(timer);
                    timer = setTimeout(function () {
                        fn(ev);
                    }, 50);
                });
            }
            content.onmousewheel = function (ev) {
                ev = ev || event;
                clearTimeout(timer);
                timer = setTimeout(function () {
                    fn(ev);
                }, 50);
            };
            function fn(ev) {
                ev = ev || event;
                var dir = "";
                if (ev.wheelDelta) {
                    dir = ev.wheelDelta > 0 ? "up" : "down";
                } else if (ev.detail) {
                    dir = ev.wheelDelta < 0 ? "up" : "down";
                }
                switch (dir) {
                    case "up":
                        now--;
                        if (now < 0) {
                            now = 0;
                        }
                        move(now);
                        break;
                    case "down":
                        now++;
                        if (now > cLiNodes.length - 1) {
                            now = cLiNodes.length - 1;
                        }
                        move(now);
                        break;
                }
            }

            /* 视口分辨率改变时，实时的更新各个界面的大小 */
            window.onresize = function () {
                contentBind();
                ulNode.style.top =
                    -(
                        document.documentElement.clientHeight -
                        head.offsetHeight
                    ) *
                        now +
                    "px";

                arrowEle.style.left =
                    liNodes[now].offsetLeft +
                    liNodes[now].offsetWidth / 2 -
                    arrowEle.offsetWidth / 2 +
                    "px";
            };
            contentBind();
            function contentBind() {
                content.style.height =
                    document.documentElement.clientHeight -
                    head.offsetHeight +
                    "px";
                for (let i = 0; i < cLiNodes.length; i++) {
                    cLiNodes[i].style.height =
                        document.documentElement.clientHeight -
                        head.offsetHeight +
                        "px";
                }
            }

            /* 头部交互 */
            headBind();
            function headBind() {
                arrowEle.style.left =
                    firstliNode.offsetLeft +
                    firstliNode.offsetWidth / 2 -
                    arrowEle.offsetWidth / 2 +
                    "px";
                firstupNode.style.width = "100%";
                firstupNode.style.height = "100%";

                //转绑
                for (let i = 0; i < liNodes.length; i++) {
                    liNodes[i].index = i;
                    liNodes[i].onclick = function () {
                        move(this.index);
                        now = this.index;
                    };
                }
            }

            /* 动画核心函数 */
            function move(index) {
                for (let j = 0; j < upNodes.length; j++) {
                    upNodes[j].style.width = "";
                }
                upNodes[index].style.width = "100%";
                upNodes[index].style.height = "100%";
                arrowEle.style.left =
                    liNodes[index].offsetLeft +
                    liNodes[index].offsetWidth / 2 -
                    arrowEle.offsetWidth / 2 +
                    "px";
                ulNode.style.top =
                    -(
                        document.documentElement.clientHeight -
                        head.offsetHeight
                    ) *
                        index +
                    "px";
            }
        };
    </script>
</html>
