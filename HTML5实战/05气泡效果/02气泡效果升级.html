<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}

			html,
			body {
				height: 100%;
				overflow: hidden;
			}

			body {
				background-color: pink;
			}

			#oc {
				position: absolute;
				right: 0;
				left: 0;
				top: 0;
				bottom: 0;
				margin: auto;
				background-color: #fff;
			}
		</style>
	</head>
	<body>
		<canvas id="oc" width="200" height="500px"></canvas>
	</body>
	<script type="text/javascript">
		window.onload = function() {
			var oc = document.getElementById("oc")

			if (oc.getContext) {
				var ctx = oc.getContext("2d")
				var arr = []


				//将数组中的圆绘制到画布上
				setInterval(function() {
					ctx.clearRect(0, 0, oc.width, oc.height)

					for (var i = 0; i < arr.length; i++) {

						/* arr[i].alpha -= 0.01
						if (arr[i].alpha <= 0) {
							arr.splice(i, 1)
						} */
						arr[i].deg += 8
						arr[i].x = arr[i].startX + Math.sin(arr[i].deg * Math.PI / 180) * arr[i].step * 2
						arr[i].y = arr[i].startY - (arr[i].deg * Math.PI / 180) * arr[i].step
						if(arr[i].y<=50){
							arr.splice(i,1)
						}
						
					}
					console.log(arr)
					for (var i = 0; i < arr.length; i++) {
						ctx.save()
						ctx.fillStyle = "rgba(" + arr[i].red + "," + arr[i].green + "," + arr[i].blue + "," + arr[i].alpha + ")"
						ctx.beginPath()
						ctx.arc(arr[i].x, arr[i].y, arr[i].r, 0, 360 * Math.PI / 180)
						ctx.fill()
						ctx.restore()
					}
				}, 1000 / 60)

				//生成随机圆
				setInterval(function() {
					//圆
					var r = Math.round(Math.random() * 8 + 2)
					var x = Math.random() * oc.width
					var y = oc.height - r

					//圆的填充色
					var red = Math.round(Math.random() * 255)
					var green = Math.round(Math.random() * 255)
					var blue = Math.round(Math.random() * 255)
					var alpha = 1
					//圆运动轨迹参数
					var deg = 0
					var step = Math.round(Math.random() * 20 + 10)
					var startX = x
					var startY = y
					arr.push({
						x: x,
						y: y,
						r: r,
						red: red,
						green: green,
						blue: blue,
						alpha: alpha,
						deg: deg,
						step: step,
						startX: startX,
						startY: startY
					})
				}, 50)


			}
		}
	</script>
</html>
